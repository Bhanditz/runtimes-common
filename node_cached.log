Creating temporary tarball archive of 1542 file(s) totalling 138.9 MiB before compression.
Some files were not included in the source upload.

Check the gcloud log [/usr/local/google/home/aprindle/.config/gcloud/logs/2018.04.23/17.47.15.383510.log] to see which files and the contents of the
default gcloudignore file used (see `$ gcloud topic gcloudignore` to learn
more).

Uploading tarball of [.] to [gs://ftl-node-test_cloudbuild/source/1524530835.44-b14c893f10b049a192fbb2abedc52b82.tgz]
Created [https://cloudbuild.googleapis.com/v1/projects/ftl-node-test/builds/66f9dd5a-f2a0-41b4-9d9b-c178587848c0].
Logs are available at [https://console.cloud.google.com/gcr/builds/66f9dd5a-f2a0-41b4-9d9b-c178587848c0?project=935431563186].
--------------------------------- REMOTE BUILD OUTPUT ---------------------------------
starting build "66f9dd5a-f2a0-41b4-9d9b-c178587848c0"

FETCHSOURCE
Fetching storage object: gs://ftl-node-test_cloudbuild/source/1524530835.44-b14c893f10b049a192fbb2abedc52b82.tgz#1524530867154011
Copying gs://ftl-node-test_cloudbuild/source/1524530835.44-b14c893f10b049a192fbb2abedc52b82.tgz#1524530867154011...
/ [0 files][    0.0 B/ 55.9 MiB]                                                -- [1 files][ 55.9 MiB/ 55.9 MiB]                                                
Operation completed over 1 objects/55.9 MiB.                                     
BUILD
Starting Step #0
Step #0: Already have image (with digest): ubuntu
Finished Step #0
Starting Step #1
Step #1: Already have image (with digest): gcr.io/cloud-builders/bazel
Step #1: Extracting Bazel installation...
Step #1: ..........................
Step #1: Loading: 
Step #1: Loading: 0 packages loaded
Step #1: Loading: 0 packages loaded
Step #1: Loading: 0 packages loaded
Step #1: Loading: 0 packages loaded
Step #1: Loading: 0 packages loaded
Step #1: Loading: 0 packages loaded
Step #1: Loading: 1 packages loaded
Step #1: Analyzing: target //ftl:node_builder.par (2 packages loaded)
Step #1: Analyzing: target //ftl:node_builder.par (4 packages loaded)
Step #1: Analyzing: target //ftl:node_builder.par (6 packages loaded)
Step #1: Analyzing: target //ftl:node_builder.par (16 packages loaded)
Step #1: INFO: Analysed target //ftl:node_builder.par (26 packages loaded).
Step #1: INFO: Found 1 target...
Step #1: [0 / 1] [-----] BazelWorkspaceStatusAction stable-status.txt
Step #1: Target //ftl:node_builder.par up-to-date:
Step #1:   bazel-bin/ftl/node_builder.par
Step #1: INFO: Elapsed time: 19.792s, Critical Path: 0.33s
Step #1: INFO: Build completed successfully, 17 total actions
Finished Step #1
Starting Step #2
Step #2: Already have image (with digest): gcr.io/cloud-builders/bazel
Step #2: .
Step #2: Loading: 
Step #2: Loading: 0 packages loaded
Step #2: Loading: 0 packages loaded
Step #2:     currently loading: ftl/node/cached
Step #2: Analyzing: target //ftl/node/cached:node_cached_image (3 packages loaded)
Step #2: Analyzing: target //ftl/node/cached:node_cached_image (6 packages loaded)
Step #2: Analyzing: target //ftl/node/cached:node_cached_image (7 packages loaded)
Step #2: Analyzing: target //ftl/node/cached:node_cached_image (7 packages loaded)
Step #2: Analyzing: target //ftl/node/cached:node_cached_image (13 packages loaded)
Step #2: Analyzing: target //ftl/node/cached:node_cached_image (18 packages loaded)
Step #2: Analyzing: target //ftl/node/cached:node_cached_image (25 packages loaded)
Step #2: Analyzing: target //ftl/node/cached:node_cached_image (26 packages loaded)
Step #2: INFO: Analysed target //ftl/node/cached:node_cached_image (29 packages loaded).
Step #2: INFO: Found 1 target...
Step #2: [0 / 1] [-----] BazelWorkspaceStatusAction stable-status.txt
Step #2: [8 / 9] no action
Step #2: [8 / 9] GUNZIP external/node_base/image/003.tar.gz.nogz; 2s linux-sandbox
Step #2: [8 / 9] GUNZIP external/node_base/image/003.tar.gz.nogz; 8s linux-sandbox
Step #2: [9 / 11] [-----] Executing genrule @six//:rename [for host]
Step #2: [21 / 29] [-----] SHA256 external/node_base/image/004.tar.gz.nogz.sha256
Step #2: Target //ftl/node/cached:node_cached_image up-to-date:
Step #2:   bazel-bin/ftl/node/cached/node_cached_image-layer.tar
Step #2: INFO: Elapsed time: 56.038s, Critical Path: 26.24s
Step #2: INFO: Build completed successfully, 42 total actions
Step #2: 
Step #2: INFO: Running command line: bazel-bin/ftl/node/cached/node_cached_image --norun
Step #2: Loaded image ID: sha256:e8ac1decb5244f95bc0cdd6998c22eeb057e1ecfe25e346faf4b03a6c9c60db6
Step #2: Tagging e8ac1decb5244f95bc0cdd6998c22eeb057e1ecfe25e346faf4b03a6c9c60db6 as bazel/ftl/node/cached:node_cached_image
Finished Step #2
Starting Step #3
Step #3: Already have image: bazel/ftl/node/cached:node_cached_image
Step #3: 2018-04-24,00:49:59.409 INFO     Beginning building node images
Step #3: 2018-04-24,00:49:59.410 INFO     label: original
Step #3: 2018-04-24,00:49:59.410 INFO     dir: /workspace/ftl/node/testdata/packages_test
Step #3: 2018-04-24,00:50:10.296 INFO     output of build original: INFO     FTL version node-v0.3.0
Step #3: INFO     Beginning FTL build for node
Step #3: INFO     FTL arg passed: exposed_ports None
Step #3: INFO     FTL arg passed: cache_repository None
Step #3: INFO     FTL arg passed: tar_base_image_path None
Step #3: INFO     FTL arg passed: name gcr.io/ftl-node-test/node-plus-one/cache/packages_test:original
Step #3: INFO     FTL arg passed: log_path None
Step #3: INFO     FTL arg passed: global_cache False
Step #3: INFO     FTL arg passed: cache True
Step #3: INFO     FTL arg passed: upload True
Step #3: INFO     FTL arg passed: base gcr.io/gae-runtimes/nodejs8_app_builder:argo_current
Step #3: INFO     FTL arg passed: output_path None
Step #3: INFO     FTL arg passed: directory /workspace/ftl/node/testdata/packages_test
Step #3: INFO     FTL arg passed: entrypoint None
Step #3: INFO     FTL arg passed: destination_path srv
Step #3: INFO     FTL arg passed: verbosity NOTSET
Step #3: INFO     starting: full build
Step #3: INFO     starting: builder initialization
Step #3: INFO     Loading Docker credentials for repository 'gcr.io/gae-runtimes/nodejs8_app_builder:argo_current'
Step #3: INFO     Loading Docker credentials for repository 'gcr.io/ftl-node-test/node-plus-one/cache/packages_test:original'
Step #3: INFO     builder initialization took 0 seconds
Step #3: INFO     starting: build process for FTL image
Step #3: INFO     starting: checking_cached_packages_json_layer
Step #3: DEBUG    Checking cache for cache_key 62c5c6f1ee64d42fb5cb158c2ac536e4b8bf6bbbe48352bc2a56c5ba58cd473c
Step #3: INFO     No cached base image found for entry: gcr.io/ftl-node-test/node-plus-one/cache/packages_test/node-cache:62c5c6f1ee64d42fb5cb158c2ac536e4b8bf6bbbe48352bc2a56c5ba58cd473c.
Step #3: INFO     Cache miss on local cache for gcr.io/ftl-node-test/node-plus-one/cache/packages_test/node-cache:62c5c6f1ee64d42fb5cb158c2ac536e4b8bf6bbbe48352bc2a56c5ba58cd473c
Step #3: INFO     No cached dependency layer for 62c5c6f1ee64d42fb5cb158c2ac536e4b8bf6bbbe48352bc2a56c5ba58cd473c
Step #3: INFO     [CACHE][MISS] v1:NODE->62c5c6f1ee64d42fb5cb158c2ac536e4b8bf6bbbe48352bc2a56c5ba58cd473c
Step #3: INFO     checking_cached_packages_json_layer took 0 seconds
Step #3: INFO     starting: building_packages_json_layer
Step #3: INFO     starting: rm_node_modules
Step #3: INFO     `rm_node_modules` full cmd:
Step #3: rm -rf srv/node_modules
Step #3: INFO     `rm_node_modules` stdout:
Step #3: 
Step #3: INFO     rm_node_modules took 0 seconds
Step #3: INFO     starting: npm_install
Step #3: INFO     `npm_install` full cmd:
Step #3: npm install --production
Step #3: INFO     `npm_install` stdout:
Step #3: added 95 packages in 3.458s
Step #3: 
Step #3: ERROR    `npm_install` had error output:
Step #3: npm WARN deprecated connect@2.30.2: connect 2.x series is deprecated
Step #3: npm notice created a lockfile as package-lock.json. You should commit this file.
Step #3: 
Step #3: INFO     npm_install took 4 seconds
Step #3: INFO     starting: tar_node_dependencies
Step #3: INFO     `tar_node_dependencies` full cmd:
Step #3: tar -cf /tmp/tmp4xSWaz.tar srv
Step #3: INFO     `tar_node_dependencies` stdout:
Step #3: 
Step #3: INFO     tar_node_dependencies took 0 seconds
Step #3: INFO     starting: gzip_node_dependencies
Step #3: INFO     `gzip_node_dependencies` full cmd:
Step #3: gzip /tmp/tmp4xSWaz.tar -1
Step #3: INFO     `gzip_node_dependencies` stdout:
Step #3: 
Step #3: INFO     gzip_node_dependencies took 0 seconds
Step #3: INFO     building_packages_json_layer took 4 seconds
Step #3: INFO     starting: uploading_packages_json_layer
Step #3: INFO     Layer sha256:2657fc250be4ee3f161a1a09b3fdd6b81f3cc5cae9cae394da859b65c4d2c5bb pushed.
Step #3: INFO     Layer sha256:eba9756b716147ab0d95996ce3011fe3fd86cee06f47c72842041fed633fd805 pushed.
Step #3: INFO     Finished upload of: gcr.io/ftl-node-test/node-plus-one/cache/packages_test/node-cache:62c5c6f1ee64d42fb5cb158c2ac536e4b8bf6bbbe48352bc2a56c5ba58cd473c
Step #3: INFO     uploading_packages_json_layer took 3 seconds
Step #3: INFO     starting: Building app layer
Step #3: INFO     Starting to generate app layer                 tarfile from context...
Step #3: INFO     Finished generating app layer tarfile from context.
Step #3: INFO     Starting to gzip app layer tarfile...
Step #3: INFO     Finished gzipping tarfile.
Step #3: INFO     Building app layer took 0 seconds
Step #3: INFO     starting: Stitching layers into final image
Step #3: INFO     Stitching layers into final image took 0 seconds
Step #3: INFO     starting: Uploading final image
Step #3: INFO     starting: Pushing image to Docker registry
Step #3: INFO     Pushing final image...
Step #3: INFO     Layer sha256:2e423312f90baf437ddb76727e49f60324cff881ae986289e503262902b9b246 exists, skipping
Step #3: INFO     Layer sha256:53361afa3e36c81d1e9b934e87970242716da5a27e79474b73e63a3be8a45cfb exists, skipping
Step #3: INFO     Layer sha256:011bed8d7f0545a4c0d92e307e697efab6b00ed9b79692c3af222d5f5e831ded exists, skipping
Step #3: INFO     Layer sha256:aa8efb4148eaae225f9c6434cf0b01effda2b157497e239f9f862a96fe4020b9 exists, skipping
Step #3: INFO     Layer sha256:8c35819f6775677abd35180b349d59b3f2c7948bbf8e66e96cf54d579264da8e exists, skipping
Step #3: INFO     Layer sha256:f3d2e146ba353d998161ed20858ec877c93fbde2186ce700f1fff9aa25907ba3 exists, skipping
Step #3: INFO     Layer sha256:04ee99c6d95bc989e8a9472ea74cc79bf9a7d77e3aff7f5339c4cb9beb2222a5 exists, skipping
Step #3: INFO     Layer sha256:1fcc64d6437889c41089be21ab8bdc957eda2ee8046ad670731f3bd983216f73 exists, skipping
Step #3: INFO     Layer sha256:62c17e5523414c68ff92994f62a1705c25747eaa11da737420b390777fe6ff5d exists, skipping
Step #3: INFO     Layer sha256:eba9756b716147ab0d95996ce3011fe3fd86cee06f47c72842041fed633fd805 exists, skipping
Step #3: INFO     Layer sha256:3c2cba919283a210665e480bcbf943eaaf4ed87a83f02e81bb286b8bdead0e75 exists, skipping
Step #3: INFO     Layer sha256:1afe14811ee051b2eb0b5fa94bf5fb749fedf556c16f38c1ddc04388fafbaf26 exists, skipping
Step #3: INFO     Layer sha256:87f317ef4c8cf6c7bdb43770cfb0a46e3d34a2e02ea434a78a4c686c7d313c3f pushed.
Step #3: INFO     Layer sha256:8ab8bebc95717b0fd1c42c4dfc2d024e874bc4c2ad4299fb862e9d26b7e4d652 pushed.
Step #3: INFO     Finished upload of: gcr.io/ftl-node-test/node-plus-one/cache/packages_test:original
Step #3: INFO     Pushing image to Docker registry took 2 seconds
Step #3: INFO     Uploading final image took 2 seconds
Step #3: INFO     build process for FTL image took 10 seconds
Step #3: INFO     full build took 10 seconds
Step #3: 
Step #3: 2018-04-24,00:50:10.298 INFO     Loading Docker credentials for repository 'gcr.io/ftl-node-test/node-plus-one/cache/packages_test:original'
Step #3: 2018-04-24,00:50:10.391 INFO     label: reupload
Step #3: 2018-04-24,00:50:10.392 INFO     dir: /workspace/ftl/node/testdata/packages_test_plus_one
Step #3: 2018-04-24,00:50:13.669 INFO     output of build reupload: INFO     FTL version node-v0.3.0
Step #3: INFO     Beginning FTL build for node
Step #3: INFO     FTL arg passed: exposed_ports None
Step #3: INFO     FTL arg passed: cache_repository None
Step #3: INFO     FTL arg passed: tar_base_image_path None
Step #3: INFO     FTL arg passed: name gcr.io/ftl-node-test/node-plus-one/cache/packages_test:reupload
Step #3: INFO     FTL arg passed: log_path None
Step #3: INFO     FTL arg passed: global_cache False
Step #3: INFO     FTL arg passed: cache True
Step #3: INFO     FTL arg passed: upload True
Step #3: INFO     FTL arg passed: base gcr.io/gae-runtimes/nodejs8_app_builder:argo_current
Step #3: INFO     FTL arg passed: output_path None
Step #3: INFO     FTL arg passed: directory /workspace/ftl/node/testdata/packages_test_plus_one
Step #3: INFO     FTL arg passed: entrypoint None
Step #3: INFO     FTL arg passed: destination_path srv
Step #3: INFO     FTL arg passed: verbosity NOTSET
Step #3: INFO     starting: full build
Step #3: INFO     starting: builder initialization
Step #3: INFO     Loading Docker credentials for repository 'gcr.io/gae-runtimes/nodejs8_app_builder:argo_current'
Step #3: INFO     Loading Docker credentials for repository 'gcr.io/ftl-node-test/node-plus-one/cache/packages_test:reupload'
Step #3: INFO     builder initialization took 0 seconds
Step #3: INFO     starting: build process for FTL image
Step #3: INFO     starting: Building app layer
Step #3: INFO     Starting to generate app layer                 tarfile from context...
Step #3: INFO     Finished generating app layer tarfile from context.
Step #3: INFO     Starting to gzip app layer tarfile...
Step #3: INFO     Finished gzipping tarfile.
Step #3: INFO     Building app layer took 0 seconds
Step #3: INFO     starting: Stitching layers into final image
Step #3: INFO     Stitching layers into final image took 0 seconds
Step #3: INFO     starting: Uploading final image
Step #3: INFO     starting: Pushing image to Docker registry
Step #3: INFO     Pushing final image...
Step #3: INFO     Layer sha256:2e423312f90baf437ddb76727e49f60324cff881ae986289e503262902b9b246 exists, skipping
Step #3: INFO     Layer sha256:53361afa3e36c81d1e9b934e87970242716da5a27e79474b73e63a3be8a45cfb exists, skipping
Step #3: INFO     Layer sha256:011bed8d7f0545a4c0d92e307e697efab6b00ed9b79692c3af222d5f5e831ded exists, skipping
Step #3: INFO     Layer sha256:aa8efb4148eaae225f9c6434cf0b01effda2b157497e239f9f862a96fe4020b9 exists, skipping
Step #3: INFO     Layer sha256:f3d2e146ba353d998161ed20858ec877c93fbde2186ce700f1fff9aa25907ba3 exists, skipping
Step #3: INFO     Layer sha256:8c35819f6775677abd35180b349d59b3f2c7948bbf8e66e96cf54d579264da8e exists, skipping
Step #3: INFO     Layer sha256:62c17e5523414c68ff92994f62a1705c25747eaa11da737420b390777fe6ff5d exists, skipping
Step #3: INFO     Layer sha256:04ee99c6d95bc989e8a9472ea74cc79bf9a7d77e3aff7f5339c4cb9beb2222a5 exists, skipping
Step #3: INFO     Layer sha256:1afe14811ee051b2eb0b5fa94bf5fb749fedf556c16f38c1ddc04388fafbaf26 exists, skipping
Step #3: INFO     Layer sha256:1fcc64d6437889c41089be21ab8bdc957eda2ee8046ad670731f3bd983216f73 exists, skipping
Step #3: INFO     Layer sha256:3c2cba919283a210665e480bcbf943eaaf4ed87a83f02e81bb286b8bdead0e75 exists, skipping
Step #3: INFO     Layer sha256:d40da21df69cef1b333c04151a625675f7fd5a68f134489d7d6457eb8052a519 pushed.
Step #3: INFO     Layer sha256:15a6f1007acdcf5f8559aa81c79567a01406cc177bed40cd017bc32927075fd6 pushed.
Step #3: INFO     Finished upload of: gcr.io/ftl-node-test/node-plus-one/cache/packages_test:reupload
Step #3: INFO     Pushing image to Docker registry took 3 seconds
Step #3: INFO     Uploading final image took 3 seconds
Step #3: INFO     build process for FTL image took 3 seconds
Step #3: INFO     full build took 3 seconds
Step #3: 
Step #3: 2018-04-24,00:50:13.670 INFO     Loading Docker credentials for repository 'gcr.io/ftl-node-test/node-plus-one/cache/packages_test:reupload'
Step #3: 2018-04-24,00:50:13.756 INFO     Encountered 1 differences between layers
Step #3: 2018-04-24,00:50:13.757 INFO     Different layer shas: set([u'sha256:d40da21df69cef1b333c04151a625675f7fd5a68f134489d7d6457eb8052a519'])
Finished Step #3
PUSH
DONE
---------------------------------------------------------------------------------------

ID                                    CREATE_TIME                DURATION  SOURCE                                                                                   IMAGES  STATUS
66f9dd5a-f2a0-41b4-9d9b-c178587848c0  2018-04-24T00:47:47+00:00  2M26S     gs://ftl-node-test_cloudbuild/source/1524530835.44-b14c893f10b049a192fbb2abedc52b82.tgz  -       SUCCESS
